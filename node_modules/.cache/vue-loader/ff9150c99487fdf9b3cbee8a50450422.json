{"remainingRequest":"/Users/jefersonsouza/Desktop/chat/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jefersonsouza/Desktop/chat/src/components/proposals/home/homePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jefersonsouza/Desktop/chat/src/components/proposals/home/homePage.vue","mtime":1631890592512},{"path":"/Users/jefersonsouza/Desktop/chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jefersonsouza/Desktop/chat/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jefersonsouza/Desktop/chat/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/jefersonsouza/Desktop/chat/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jefersonsouza/Desktop/chat/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCmNvbnN0IHNvY2tldCA9IGlvKHsgdHJhbnNwb3J0czogWyd3ZWJzb2NrZXQnXSB9KTsKY29uc29sZS5sb2coJ2NyaWFyIHNvY2tldC5pbycpOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXNzYWdlczogW10sCiAgICAgIG1lbnNhZ2VtUGFydGljdWxhcjogW10sCiAgICAgIGxpc3RSb29tOiBbXSwKICAgICAgY2hhdHM6IFtdLAogICAgICByZWNvbmVjdGFyOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnbG9hZGluZ1BhZ2UnLCAnbW9kYWxFZGl0J10pLAogICAgbGlzdFJvb21Db21wdXRlZDogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubGlzdFJvb207CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWydzZXRMb2FkaW5nUGFnZScsICdzZXRNb2RhbEVkaXQnXSksCiAgICAvLyBDcmlhciBzYWxhIGRlIGJhdGUgcGFwbwogICAgYXN5bmMgY3JlYXRlUm9vbShpZCkgewogICAgICBjb25zb2xlLmxvZygnQWJyaSBjaGF0ICcpOwogICAgICBpZiAodGhpcy5jaGF0cy5pbmRleE9mKGlkKSA9PT0gLTEpIHsKICAgICAgICB0aGlzLmNoYXRzLnB1c2goaWQpOwogICAgICAgIGxldCBsb2dnZWRJblVzZXIgPSB0aGlzLm1vZGFsRWRpdDsKICAgICAgICBsZXQgcm9vbSA9ICcnOwogICAgICAgIGlmICh0aGlzLm1vZGFsRWRpdCA+IGlkKSB7CiAgICAgICAgICByb29tID0gdGhpcy5tb2RhbEVkaXQgKyBpZDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcm9vbSA9IGlkICsgdGhpcy5tb2RhbEVkaXQ7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxpc3RSb29tLnB1c2gocm9vbSk7CiAgICAgICAgdGhpcy5tZW5zYWdlbVBhcnRpY3VsYXIucHVzaCgnJyk7CgogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9tZW5zYWdlbnMvJyArIHJvb20pOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gdGhpcy5tZXNzYWdlcy5jb25jYXQocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBzb2NrZXQuZW1pdCgnY3JlYXRlJywgewogICAgICAgICAgcm9vbTogcm9vbSwKICAgICAgICAgIHVzZXJJZDogbG9nZ2VkSW5Vc2VyLnVzZXJJZCwKICAgICAgICAgIHdpdGhVc2VySWQ6IGlkLAogICAgICAgICAgdXNlcjogdGhpcy5tb2RhbEVkaXQKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlbmRNZXNzYWdlKHJvb20sIGluZGV4KSB7CiAgICAgIGNvbnNvbGUubG9nKCdFbnZpYXIgbWVuc2FnZW0gJyk7CiAgICAgIGxldCBsb2dnZWRJblVzZXIgPSB0aGlzLm1vZGFsRWRpdDsKICAgICAgbGV0IG1lc3NhZ2UgPSB0aGlzLm1lbnNhZ2VtUGFydGljdWxhcltpbmRleF07CiAgICAgIHRoaXMubWVuc2FnZW1QYXJ0aWN1bGFyW2luZGV4XSA9ICcnOwoKICAgICAgc29ja2V0LmVtaXQoJ21lc3NhZ2UnLCB7CiAgICAgICAgcm9vbTogcm9vbSwKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgIGZyb206IGxvZ2dlZEluVXNlcgogICAgICB9KTsKCiAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7CiAgICAgICAgcm9vbTogcm9vbSwKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgIGZyb206IGxvZ2dlZEluVXNlcgogICAgICB9KTsKICAgIH0sCiAgICBtaW5pbWl6ZUNoYXQocm9vbSwgaW5kZXgpIHsKICAgICAgdGhpcy5saXN0Um9vbS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmNoYXRzLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMubWVzc2FnZXMgPSB0aGlzLm1lc3NhZ2VzLmZpbHRlcihpdGVtID0+IGl0ZW0ucm9vbSAhPT0gcm9vbSk7CiAgICB9LAogICAgY3JlYXRlVXNlcigpIHsKICAgICAgaWYgKHRoaXMubW9kYWxFZGl0ID09PSAnJykgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ2NyaWFyIHVzdWFyaW8gJyk7CiAgICAgICAgc29ja2V0LmVtaXQoJ2xvZ2dlZGluJywgeyB1c2VyX2lkOiB0aGlzLm1vZGFsRWRpdCB9KTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY3JlYXRlVXNlcigpOwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24oKSB7CiAgICAvLyBjcmlhciBjaGF0CiAgICBzb2NrZXQub24oJ3VwZGF0ZVVzZXJMaXN0JywgcmVzcG9uc2UgPT4gewogICAgICBjb25zb2xlLmxvZygnYXR1YWxpYcOnYW8gZGUgdXN1YXJpb3MnKTsKCiAgICAgIC8vIENIYXQgcXVlIGVzdGF2YSBvbiBlIHByZWNpc28gcmVhYnJpciBjb25leGFvCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZWNvbmVjdGFyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8gU2UgbyBjaGF0IGFiZXJ0byBuYW8gZXhpc3RpciBhcXVpCiAgICAgICAgaWYgKHJlc3BvbnNlWzFdLmluZGV4T2YodGhpcy5yZWNvbmVjdGFyW2ldKSA9PT0gMSkgewogICAgICAgICAgY29uc29sZS5sb2coJ3ByZWNpc28gcmVjb25lY3RhciBlc3NlIGNoYXQnKTsKCiAgICAgICAgICBsZXQgcm9vbSA9ICcnOwogICAgICAgICAgaWYgKHRoaXMubW9kYWxFZGl0ID4gdGhpcy5jaGF0c1tpXSkgewogICAgICAgICAgICByb29tID0gdGhpcy5tb2RhbEVkaXQgKyB0aGlzLmNoYXRzW2ldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm9vbSA9IHRoaXMuY2hhdHNbaV0gKyB0aGlzLm1vZGFsRWRpdDsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmNoYXRzLmluZGV4T2YodGhpcy5yZWNvbmVjdGFyW2ldKTsKICAgICAgICAgIHRoaXMubWluaW1pemVDaGF0KHJvb20sIGluZGV4KTsKICAgICAgICAgIHRoaXMuY3JlYXRlUm9vbSh0aGlzLnJlY29uZWN0YXJbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gQXZpc2FyIHNlIGFsZ3VlbSBmaWNhciBvZiBlIGV1IHRlbmhvIGNoYXQgYWJlcnRvOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hhdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBTZSBvIGNoYXQgYWJlcnRvIG5hbyBleGlzdGlyIGFxdWkKICAgICAgICBpZiAocmVzcG9uc2VbMV0uaW5kZXhPZih0aGlzLmNoYXRzW2ldKSA9PT0gLTEpIHsKICAgICAgICAgIGxldCByb29tID0gJyc7CiAgICAgICAgICBpZiAodGhpcy5tb2RhbEVkaXQgPiB0aGlzLmNoYXRzW2ldKSB7CiAgICAgICAgICAgIHJvb20gPSB0aGlzLm1vZGFsRWRpdCArIHRoaXMuY2hhdHNbaV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb29tID0gdGhpcy5jaGF0c1tpXSArIHRoaXMubW9kYWxFZGl0OwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5yZWNvbmVjdGFyLnB1c2godGhpcy5jaGF0c1tpXSk7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goewogICAgICAgICAgICByb29tOiByb29tLAogICAgICAgICAgICBtZXNzYWdlOiAnVXN1YXJpbyBlc3RhIG9mZicsCiAgICAgICAgICAgIGZyb206ICdBdXRvbWF0aWNhJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNldExvYWRpbmdQYWdlKHJlc3BvbnNlWzBdKTsKICAgIH0pOwoKICAgIC8vIGNoYXQgZm9pIGFiZXJ0byBlbSBvdXRybyBsdWdhcgogICAgc29ja2V0Lm9uKCdpbnZpdGUnLCBkYXRhID0+IHsKICAgICAgY29uc29sZS5sb2coJ2NoYXQgZm9pIGFiZXJ0bycpOwogICAgICBzb2NrZXQuZW1pdCgnam9pblJvb20nLCBkYXRhKTsKICAgIH0pOwoKICAgIC8vIE9uZGUgY2hlZ2EgYXMgbWVuc2FnZW5zIGRlIG91dHJvIHJlbWV0ZW50ZQogICAgc29ja2V0Lm9uKCdtZXNzYWdlJywgYXN5bmMgbXNnID0+IHsKICAgICAgY29uc29sZS5sb2coJ0NIRUdPVSBVTUEgTUVOU0FHRU0gJyk7CiAgICAgIGlmICh0aGlzLmxpc3RSb29tLmluZGV4T2YobXNnLnJvb20pID09PSAtMSkgewogICAgICAgIHRoaXMubGlzdFJvb20ucHVzaChtc2cucm9vbSk7CiAgICAgICAgdGhpcy5jaGF0cy5wdXNoKG1zZy5mcm9tKTsKICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvbWVuc2FnZW5zLycgKyBtc2cucm9vbSk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHRoaXMubWVzc2FnZXMuY29uY2F0KHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5tZXNzYWdlc1t0aGlzLm1lc3NhZ2VzLmxlbmd0aCAtIDFdID0gZGVsZXRlIHRoaXMubWVzc2FnZXNbCiAgICAgICAgICB0aGlzLm1lc3NhZ2VzLmxlbmd0aCAtIDEKICAgICAgICBdWydfaWQnXTsKCiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5tZXNzYWdlc1t0aGlzLm1lc3NhZ2VzLmxlbmd0aCAtIDFdICE9PQogICAgICAgICAgeyByb29tOiBtc2cucm9vbSwgbWVzc2FnZTogbXNnLm1lc3NhZ2UsIGZyb206IG1zZy5mcm9tIH0KICAgICAgICApIHsKICAgICAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7CiAgICAgICAgICAgIHJvb206IG1zZy5yb29tLAogICAgICAgICAgICBtZXNzYWdlOiBtc2cubWVzc2FnZSwKICAgICAgICAgICAgZnJvbTogbXNnLmZyb20KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1lbnNhZ2VtUGFydGljdWxhci5wdXNoKCcnKTsKCiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKHsKICAgICAgICAgIHJvb206IG1zZy5yb29tLAogICAgICAgICAgbWVzc2FnZTogbXNnLm1lc3NhZ2UsCiAgICAgICAgICBmcm9tOiBtc2cuZnJvbQogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9Cn07Cg=="},{"version":3,"sources":["homePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"homePage.vue","sourceRoot":"src/components/proposals/home","sourcesContent":["<template>\n  <div\n    style=\"width: 50rem; margin-bottom: 7rem; margin-top: 7rem;\"\n    class=\"bx--grid\"\n  >\n    <div class=\"bx--row\">\n      <p style=\"font-size: 22px;\">Usuario conectado : {{ modalEdit }}</p>\n    </div>\n    <!-- Lista de usuario conectados -->\n    <div class=\"bx--row\" v-for=\"user in loadingPage\" v-bind:key=\"user.socketId\">\n      <li\n        v-if=\"user.user_id !== modalEdit\"\n        v-bind:id=\"user.user_id\"\n        v-on:click=\"createRoom(user.user_id)\"\n      >\n        {{ user.user_id }}\n      </li>\n    </div>\n    <!-- Chat -->\n    <div\n      class=\"bx--row\"\n      v-bind:key=\"room\"\n      v-for=\"(room, id) in listRoomComputed\"\n      style=\"width: 17rem;border: 1px solid black;min-height: 17.5rem;max-height: 17.5rem; margin-top: 2rem;\"\n    >\n      <div class=\"bx--col\">\n        <div class=\"bx--row\">\n          <div style=\"width: 85%;\" lass=\"bx--col--lg\">ID CHAT : {{ room }}</div>\n          <div @click=\"minimizeChat(room, id)\" class=\"bx--col\">\n            x\n          </div>\n        </div>\n\n        <!-- Chat -->\n        <div\n          class=\"bx--row\"\n          style=\"overflow: auto; flex-direction: column-reverse; min-height: 15rem; max-height: 15rem;\"\n        >\n          <div class=\"bx--col\">\n            <div\n              class=\"bx--row\"\n              v-for=\"(message, index) in messages\"\n              v-bind:key=\"index\"\n            >\n              <div v-if=\"room === message.room\">\n                <div>\n                  <span class=\"message\"\n                    >{{ message.from }}: {{ message.message }}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- Botao de enviar mensagem -->\n        <div class=\"bx--row\">\n          <div class=\"chat-window\" id=\"${room}\">\n            <div class=\"body\"></div>\n            <div class=\"footer\">\n              <input\n                style=\"width: 14.7rem;\"\n                type=\"text\"\n                v-model=\"mensagemParticular[id]\"\n                class=\"messageText\"\n                v-on:keyup.enter=\"sendMessage(room, id)\"\n              />\n              <button @click=\"sendMessage(room, id)\">GO</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport axios from 'axios';\n// eslint-disable-next-line no-undef\nconst socket = io({ transports: ['websocket'] });\nconsole.log('criar socket.io');\n\nexport default {\n  data() {\n    return {\n      messages: [],\n      mensagemParticular: [],\n      listRoom: [],\n      chats: [],\n      reconectar: []\n    };\n  },\n  computed: {\n    ...mapGetters(['loadingPage', 'modalEdit']),\n    listRoomComputed: {\n      get() {\n        return this.listRoom;\n      }\n    }\n  },\n  methods: {\n    ...mapActions(['setLoadingPage', 'setModalEdit']),\n    // Criar sala de bate papo\n    async createRoom(id) {\n      console.log('Abri chat ');\n      if (this.chats.indexOf(id) === -1) {\n        this.chats.push(id);\n        let loggedInUser = this.modalEdit;\n        let room = '';\n        if (this.modalEdit > id) {\n          room = this.modalEdit + id;\n        } else {\n          room = id + this.modalEdit;\n        }\n\n        this.listRoom.push(room);\n        this.mensagemParticular.push('');\n\n        let response = await axios.get('/api/mensagens/' + room);\n\n        if (response.data.length > 0) {\n          this.messages = this.messages.concat(response.data);\n        }\n\n        socket.emit('create', {\n          room: room,\n          userId: loggedInUser.userId,\n          withUserId: id,\n          user: this.modalEdit\n        });\n      }\n    },\n    sendMessage(room, index) {\n      console.log('Enviar mensagem ');\n      let loggedInUser = this.modalEdit;\n      let message = this.mensagemParticular[index];\n      this.mensagemParticular[index] = '';\n\n      socket.emit('message', {\n        room: room,\n        message: message,\n        from: loggedInUser\n      });\n\n      this.messages.push({\n        room: room,\n        message: message,\n        from: loggedInUser\n      });\n    },\n    minimizeChat(room, index) {\n      this.listRoom.splice(index, 1);\n      this.chats.splice(index, 1);\n      this.messages = this.messages.filter(item => item.room !== room);\n    },\n    createUser() {\n      if (this.modalEdit === '') {\n        this.$router.push('/');\n      } else {\n        console.log('criar usuario ');\n        socket.emit('loggedin', { user_id: this.modalEdit });\n      }\n    }\n  },\n  mounted() {\n    this.createUser();\n  },\n  created: function() {\n    // criar chat\n    socket.on('updateUserList', response => {\n      console.log('atualiaçao de usuarios');\n\n      // CHat que estava on e preciso reabrir conexao\n      for (let i = 0; i < this.reconectar.length; i++) {\n        // Se o chat aberto nao existir aqui\n        if (response[1].indexOf(this.reconectar[i]) === 1) {\n          console.log('preciso reconectar esse chat');\n\n          let room = '';\n          if (this.modalEdit > this.chats[i]) {\n            room = this.modalEdit + this.chats[i];\n          } else {\n            room = this.chats[i] + this.modalEdit;\n          }\n\n          let index = this.chats.indexOf(this.reconectar[i]);\n          this.minimizeChat(room, index);\n          this.createRoom(this.reconectar[i]);\n        }\n      }\n\n      // Avisar se alguem ficar of e eu tenho chat aberto;\n      for (let i = 0; i < this.chats.length; i++) {\n        // Se o chat aberto nao existir aqui\n        if (response[1].indexOf(this.chats[i]) === -1) {\n          let room = '';\n          if (this.modalEdit > this.chats[i]) {\n            room = this.modalEdit + this.chats[i];\n          } else {\n            room = this.chats[i] + this.modalEdit;\n          }\n          this.reconectar.push(this.chats[i]);\n          this.messages.push({\n            room: room,\n            message: 'Usuario esta off',\n            from: 'Automatica'\n          });\n        }\n      }\n\n      this.setLoadingPage(response[0]);\n    });\n\n    // chat foi aberto em outro lugar\n    socket.on('invite', data => {\n      console.log('chat foi aberto');\n      socket.emit('joinRoom', data);\n    });\n\n    // Onde chega as mensagens de outro remetente\n    socket.on('message', async msg => {\n      console.log('CHEGOU UMA MENSAGEM ');\n      if (this.listRoom.indexOf(msg.room) === -1) {\n        this.listRoom.push(msg.room);\n        this.chats.push(msg.from);\n        let response = await axios.get('/api/mensagens/' + msg.room);\n        if (response.data.length > 0) {\n          this.messages = this.messages.concat(response.data);\n        }\n\n        this.messages[this.messages.length - 1] = delete this.messages[\n          this.messages.length - 1\n        ]['_id'];\n\n        if (\n          this.messages[this.messages.length - 1] !==\n          { room: msg.room, message: msg.message, from: msg.from }\n        ) {\n          this.messages.push({\n            room: msg.room,\n            message: msg.message,\n            from: msg.from\n          });\n        }\n      } else {\n        this.mensagemParticular.push('');\n\n        this.messages.push({\n          room: msg.room,\n          message: msg.message,\n          from: msg.from\n        });\n      }\n    });\n  }\n};\n</script>\n"]}]}