(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-237b9486"],{"090c":function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var i=r("3bda"),o=r("2b0e");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){return l(t)||m(t)||d(t)||h()}function l(t){if(Array.isArray(t))return u(t)}function m(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function d(t,e){if(t){if("string"===typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t){return o[t]}var g=p("h"),f=function(t,e,r){return Object(i["a"])(a(a({},e),{},{preserveAspectRatio:"xMidYMid meet",xmlns:"http://www.w3.org/2000/svg",title:t},r))},b=function(t,e,r,i){var o={attrs:f(t,e,r.attrs),on:i,style:a(a({},r.staticStyle),r.style)};return delete o.attrs.style,(r.staticClass||r.class)&&(o.class={},r.staticClass&&(o.class[r.staticClass]=!0),r.class&&(o.class[r.class]=!0)),o},v=function(t,e,r){return a({props:{title:String},name:t},g?{setup:function(t,i){var o=t.title,s=i.attrs,a=i.slots;return function(){return g("svg",f(o,e,s),[].concat(c(o?[g("title",o)]:[]),c(r.map((function(t){var e=t.elem,r=t.attrs;return g(e,r)}))),c(a.default?a.default():[])))}}}:{functional:!0,render:function(t,i){var o=i.props.title,s=i.children,a=i.data,n=i.listeners;return t("svg",b(o,e,a,n),[].concat(c(o?[t("title",null,o)]:[]),c(r.map((function(e){var r=e.elem,i=e.attrs;return t(r,{attrs:i})}))),c(s||[])))}})}},2205:function(t,e,r){"use strict";r("851d")},"222a":function(t,e,r){"use strict";var i=r("090c"),o=Object(i["a"])(o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},[{elem:"path",attrs:{d:"M17.74,30,16,29l4-7h6a2,2,0,0,0,2-2V8a2,2,0,0,0-2-2H6A2,2,0,0,0,4,8V20a2,2,0,0,0,2,2h9v2H6a4,4,0,0,1-4-4V8A4,4,0,0,1,6,4H26a4,4,0,0,1,4,4V20a4,4,0,0,1-4,4H21.16Z"}},{elem:"path",attrs:{d:"M8 10H24V12H8zM8 16H18V18H8z"}}]);e["a"]=o},"3bda":function(t,e,r){"use strict";function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(null==t)return{};var r,i,o={},s=Object.keys(t);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)>=0||(o[r]=t[r]);return o}function n(t,e){if(null==t)return{};var r,i,o=a(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}r.d(e,"a",(function(){return d}));var c=["width","height","viewBox"],l=["tabindex"],m={focusable:"false",preserveAspectRatio:"xMidYMid meet"};function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,r=t.height,i=t.viewBox,s=void 0===i?"0 0 ".concat(e," ").concat(r):i,a=n(t,c),d=a.tabindex,u=n(a,l),h=o(o(o({},m),u),{},{width:e,height:r,viewBox:s});return h["aria-label"]||h["aria-labelledby"]||h.title?(h.role="img",void 0!==d&&null!==d&&(h.focusable="true",h.tabindex=d)):h["aria-hidden"]=!0,h}},"851d":function(t,e,r){},b556:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bx--grid"},[r("div",{staticClass:"bx--row"},[r("div",{staticClass:"bx--col-lg-2"},[r("cv-accordion",{ref:"acc"},[r("cv-accordion-item",[r("template",{slot:"title"},[t._v("Conversas: ")]),r("template",{slot:"content"},t._l(t.historicoComputed,(function(e){return r("div",{key:e.chatCom,staticClass:"bx--row",staticStyle:{height:"3.6rem"}},[r("div",{staticClass:"bx--col--lg"},[r("img",{staticStyle:{width:"2rem",height:"2rem","border-radius":"50%",cursor:"pointer"},attrs:{src:"static/"+e.chatcom+".png"},on:{click:function(r){return t.createRoom(e.chatcom)}}})]),r("div",{staticClass:"bx--col--lg",staticStyle:{"padding-top":"0.3rem","padding-left":"0.5rem"}},[r("div",{staticClass:"bx--row"},[e.chatcom!==t.modalEdit?r("p",{staticStyle:{"padding-left":"1rem",cursor:"pointer"},attrs:{id:e.chatcom},on:{click:function(r){return t.createRoom(e.chatcom)}}},[t._v(" "+t._s(e.chatcom)+" ")]):t._e()]),r("div",{staticClass:"bx--row"},[e.chatcom!==t.modalEdit?r("p",{staticStyle:{"padding-left":"1rem",cursor:"pointer","font-size":"10px"},attrs:{id:e.chatcom},on:{click:function(r){return t.createRoom(e.chatcom)}}},[t._v(" "+t._s(e.ultimaMensagem.substr(0,17))+" ... ")]):t._e()])]),-1!==t.listNotificationMensagem.indexOf(e.chatcom)?r("div",{staticClass:"bx--col--lg",staticStyle:{"padding-top":"0.3rem","padding-left":"0.5rem"}},[r("ChatIco")],1):t._e()])})),0)],2)],1)],1),r("div",{staticClass:"bx--col"},[r("div",{staticClass:"bx--row"},[r("div",{staticClass:"bx--col",staticStyle:{border:"1px solid"}},[r("div",{staticClass:"bx--row"},[r("div",{staticStyle:{width:"80%","padding-top":"0.5rem","padding-bottom":"0.5rem"},attrs:{lass:"bx--col--lg"}},[t._v(" ID CHAT : "+t._s(t.listRoomComputed.room)+" ")])]),r("div",{staticClass:"bx--row",staticStyle:{overflow:"auto","flex-direction":"column-reverse",height:"76vh"}},[r("div",{staticClass:"bx--col"},t._l(t.messages,(function(e,i){return r("div",{key:i,staticClass:"bx--row"},[r("div"),r("div",{staticClass:"bx--col--lg",staticStyle:{"padding-left":"0.5rem"}},[r("img",{staticStyle:{width:"2rem",height:"2rem","border-radius":"50%","margin-top":"1rem"},attrs:{src:"static/"+e.from+".png"}})]),r("div",{staticClass:"bx--col--lg",staticStyle:{"min-height":"1rem","background-color":"white","margin-left":"0.5rem","margin-top":"0.5rem","padding-top":"0.5rem","padding-bottom":"0.5rem","border-radius":"25px",padding:"1rem"}},[r("span",{staticClass:"message"},[t._v(" "+t._s(e.message)+" ")])])])})),0)]),r("div",{staticClass:"bx--row",staticStyle:{"padding-top":"1rem"}},[r("div",{staticClass:"chat-window",staticStyle:{width:"100%"},attrs:{id:t.listRoomComputed.room}},[r("div",{staticClass:"body"}),r("div",{staticClass:"footer"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.mensagemParticular,expression:"mensagemParticular"}],staticClass:"messageText",staticStyle:{width:"90%",height:"2rem"},attrs:{type:"text"},domProps:{value:t.mensagemParticular},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage(t.listRoomComputed.room,t.listRoomComputed.withUserId)},input:function(e){e.target.composing||(t.mensagemParticular=e.target.value)}}}),r("button",{staticStyle:{height:"2rem"},on:{click:function(e){return t.sendMessage(t.listRoomComputed.room,t.listRoomComputed.withUserId)}}},[t._v(" GO ")])])])])])])])])])},o=[],s=r("2f62"),a=r("bc3a"),n=r.n(a),c=r("222a");const l=io({transports:["websocket"]});console.log("criar socket.io");var m={name:"chat",data(){return{messages:[],mensagemParticular:[],listRoom:[],reconectar:"",historico:[],chatAberto:"",listNotificationMensagem:[]}},components:{ChatIco:c["a"]},computed:{...Object(s["c"])(["modalEdit","chamarChat"]),listRoomComputed:{get(){return this.listRoom}},historicoComputed:{get(){return this.historico}}},methods:{...Object(s["b"])(["setLoadingPage"]),async createRoom(t){if(this.chatAberto!==t||this.reconectar===this.chatAberto){this.chatAberto=t,this.reconectar=!1;let e=this.modalEdit,r="";r=this.modalEdit>t?this.modalEdit+t:t+this.modalEdit,this.listRoom={room:r,withUserId:t},this.mensagemParticular="";let i={token:this.token,room:r},o=await n.a.post("/api/mensagens",i);o.data.length>0&&(this.messages=o.data),l.emit("create",{room:r,userId:e.userId,withUserId:t,user:this.modalEdit})}},sendMessage(t,e){console.log("Enviar mensagem ");let r=this.modalEdit,i=this.mensagemParticular;this.mensagemParticular="",l.emit("message",{room:t,message:i,from:r,withUserId:e}),this.messages.push({room:t,message:i,from:r})},criarUsuario(){""!==this.modalEdit?l.emit("loggedin",{user_id:this.modalEdit}):this.$router.push("/login")},async mensagemAntiga(){let t={token:this.token,usuario:this.modalEdit},e=await n.a.post("/api/historico/mensagens",t);!0===e.data.status&&(this.historico=e.data.data)}},mounted(){this.token=this.$cookies.get("token"),this.criarUsuario(),this.createRoom(this.chamarChat),this.mensagemAntiga()},created:function(){l.on("updateUserList",t=>{!1!==this.reconectar&&-1!==t[1].indexOf(this.reconectar)&&this.createRoom(this.listRoomComputed.withUserId),-1===t[1].indexOf(this.listRoomComputed.withUserId)&&this.reconectar!==this.listRoomComputed.withUserId&&(this.reconectar=this.listRoomComputed.withUserId,this.messages.push({room:this.listRoomComputed.room,message:"Usuario esta Off-line",from:"off"})),this.setLoadingPage("")}),l.on("invite",t=>{l.emit("joinRoom",t)}),l.on("message",async t=>{this.listRoomComputed.room===t.room?this.messages.push({room:t.room,message:t.message,from:t.from}):this.listNotificationMensagem.push(t.from)})}},d=m,u=(r("2205"),r("2877")),h=Object(u["a"])(d,i,o,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-237b9486.f3d26d66.js.map