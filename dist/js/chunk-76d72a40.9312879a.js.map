{"version":3,"sources":["webpack:///./src/components/chat/page.vue?e481","webpack:///./src/components/chat/page.vue?bf80","webpack:///src/components/chat/page.vue","webpack:///./src/components/chat/page.vue?2ab3","webpack:///./src/components/chat/page.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","loadingPage","length","staticStyle","_v","_l","user","key","socketId","user_id","modalEdit","attrs","on","$event","createRoom","_s","_e","room","id","minimizeChat","message","index","from","directives","name","rawName","value","mensagemParticular","expression","domProps","type","indexOf","_k","keyCode","sendMessage","target","composing","$set","staticRenderFns","socket","io","console","log","messages","listRoom","chats","reconectar","toke","computed","listRoomComputed","methods","push","loggedInUser","payload","response","data","concat","emit","userId","withUserId","splice","filter","item","$router","token","$cookies","get","criarUsuario","chamarChat","created","i","setLoadingPage","async","msg","component"],"mappings":"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","file":"js/chunk-76d72a40.9312879a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bx--grid\"},[_c('div',{staticClass:\"bx--row\"},[_c('div',{staticClass:\"bx--col\"},[(_vm.loadingPage.length === 1)?_c('div',{staticClass:\"bx--row\"},[_c('p',{staticStyle:{\"padding-left\":\"1rem\",\"cursor\":\"pointer\"}},[_vm._v(\"Nenhum usuario conectado \")])]):_vm._l((_vm.loadingPage),function(user){return _c('div',{key:user.socketId,staticClass:\"bx--row\"},[(user.user_id !== _vm.modalEdit)?_c('p',{staticStyle:{\"padding-left\":\"1rem\",\"cursor\":\"pointer\"},attrs:{\"id\":user.user_id},on:{\"click\":function($event){return _vm.createRoom(user.user_id)}}},[_vm._v(\" \"+_vm._s(user.user_id)+\" \")]):_vm._e()])})],2),_c('div',{staticClass:\"bx--col\"},_vm._l((_vm.listRoomComputed),function(room,id){return _c('div',{key:room,staticClass:\"bx--row\",staticStyle:{\"width\":\"17rem\",\"border\":\"1px solid black\",\"min-height\":\"17.5rem\",\"max-height\":\"17.5rem\",\"margin-top\":\"2rem\"}},[_c('div',{staticClass:\"bx--col\"},[_c('div',{staticClass:\"bx--row\"},[_c('div',{staticStyle:{\"width\":\"80%\",\"padding-top\":\"0.5rem\",\"padding-bottom\":\"0.5rem\"},attrs:{\"lass\":\"bx--col--lg\"}},[_vm._v(\"ID CHAT : \"+_vm._s(room))]),_c('div',{staticClass:\"bx--col\",staticStyle:{\"cursor\":\"pointer\",\"font-size\":\"1.3rem\"},on:{\"click\":function($event){return _vm.minimizeChat(room, id)}}},[_vm._v(\" x \")])]),_c('div',{staticClass:\"bx--row\",staticStyle:{\"overflow\":\"auto\",\"flex-direction\":\"column-reverse\",\"min-height\":\"13.5rem\",\"max-height\":\"13.5rem\"}},[_c('div',{staticClass:\"bx--col\"},_vm._l((_vm.messages),function(message,index){return _c('div',{key:index,staticClass:\"bx--row\"},[(room === message.room)?_c('div',[_c('div',[_c('span',{staticClass:\"message\"},[_vm._v(_vm._s(message.from)+\": \"+_vm._s(message.message)+\" \")])])]):_vm._e()])}),0)]),_c('div',{staticClass:\"bx--row\"},[_c('div',{staticClass:\"chat-window\",attrs:{\"id\":room}},[_c('div',{staticClass:\"body\"}),_c('div',{staticClass:\"footer\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mensagemParticular[id]),expression:\"mensagemParticular[id]\"}],staticClass:\"messageText\",staticStyle:{\"width\":\"13.7rem\",\"height\":\"2rem\"},attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.mensagemParticular[id])},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage(room, id)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.mensagemParticular, id, $event.target.value)}}}),_c('button',{staticStyle:{\"height\":\"2rem\"},on:{\"click\":function($event){return _vm.sendMessage(room, id)}}},[_vm._v(\"GO\")])])])])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"bx--grid\">      \n      <div class=\"bx--row\">\n        <div class=\"bx--col\"> \n            <div class=\"bx--row\" v-if=\"loadingPage.length === 1\"> \n              <p style=\"padding-left: 1rem; cursor: pointer\">Nenhum usuario conectado  </p>\n            </div> \n                <!-- Lista de usuario conectados -->\n            <div v-else class=\"bx--row\" v-for=\"user in loadingPage\" v-bind:key=\"user.socketId\">\n                  <p\n                    v-if=\"user.user_id !== modalEdit\"\n                    v-bind:id=\"user.user_id\"\n                    v-on:click=\"createRoom(user.user_id)\"\n                    style=\"padding-left: 1rem; cursor: pointer\"\n                  >\n                    {{ user.user_id }}\n                  </p>\n                \n            </div>  \n        </div>\n        \n\n        <div class=\"bx--col\">\n          <div class=\"bx--row\" v-bind:key=\"room\" v-for=\"(room, id) in listRoomComputed\" style=\"width: 17rem;border: 1px solid black;min-height: 17.5rem;max-height: 17.5rem; margin-top: 2rem;\" >\n            <div class=\"bx--col\">\n              <!-- id / botao de eliminar  -->\n              <div class=\"bx--row\">\n                <div style=\"width: 80%; padding-top: 0.5rem; padding-bottom: 0.5rem;\" lass=\"bx--col--lg\">ID CHAT : {{ room }}</div>\n                <div @click=\"minimizeChat(room, id)\" class=\"bx--col\" style=\"cursor: pointer; font-size: 1.3rem;\" >\n                  x\n                </div>\n              </div>\n              <!-- Mensagens -->\n              <div class=\"bx--row\" style=\"overflow: auto; flex-direction: column-reverse; min-height: 13.5rem; max-height: 13.5rem;\" >\n                <div class=\"bx--col\">\n                  <div\n                    class=\"bx--row\"\n                    v-for=\"(message, index) in messages\"\n                    v-bind:key=\"index\"\n                  >\n                    <div v-if=\"room === message.room\">\n                      <div>\n                        <span class=\"message\"\n                          >{{ message.from }}: {{ message.message }}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <!-- Botao de enviar mensagem -->\n              <div class=\"bx--row\">\n                <div class=\"chat-window\" v-bind:id=\"room\">\n                  <div class=\"body\"></div>\n                  <div class=\"footer\">\n                    <input\n                      style=\"width: 13.7rem;height: 2rem;\"\n                      type=\"text\"\n                      v-model=\"mensagemParticular[id]\"\n                      class=\"messageText\"\n                      v-on:keyup.enter=\"sendMessage(room, id)\"\n                    />\n                    <button style=\"height: 2rem;\" @click=\"sendMessage(room, id)\">GO</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        </div> \n      </div>\n    \n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex';\nimport axios from 'axios';\n// eslint-disable-next-line no-undef\nconst socket = io({ transports: ['websocket'] });\nconsole.log('criar socket.io');\n\nexport default {\n  name: 'chat',\n  data() {\n    return {\n      messages: [],\n      mensagemParticular: [],\n      listRoom: [],\n      chats: [],\n      reconectar: [],\n      toke: ''\n    };\n  },\n  computed: {\n    ...mapGetters(['loadingPage', 'modalEdit', 'chamarChat']),\n    listRoomComputed: {\n      get() {\n        return this.listRoom;\n      }\n    }\n  },\n  methods: {\n    ...mapActions(['setLoadingPage']),\n    // Criar sala de bate papo\n    async createRoom(id) {\n      console.log('Abri chat ');\n      if (this.chats.indexOf(id) === -1) {\n        this.chats.push(id);\n        let loggedInUser = this.modalEdit;\n        let room = '';\n        if (this.modalEdit > id) {\n          room = this.modalEdit + id;\n        } else {\n          room = id + this.modalEdit;\n        }\n\n        this.listRoom.push(room);\n        this.mensagemParticular.push('');\n        let payload = { token: this.token, room :  room }\n        let response = await axios.post('/api/mensagens', payload );\n\n        if (response.data.length > 0) {\n          this.messages = this.messages.concat(response.data);\n        }\n\n        socket.emit('create', {\n          room: room,\n          userId: loggedInUser.userId,\n          withUserId: id,\n          user: this.modalEdit\n        });\n      }\n    },\n    sendMessage(room, index) {\n      console.log('Enviar mensagem ');\n      let loggedInUser = this.modalEdit;\n      let message = this.mensagemParticular[index];\n      this.mensagemParticular[index] = '';\n\n      socket.emit('message', {\n        room: room,\n        message: message,\n        from: loggedInUser\n      });\n\n      this.messages.push({\n        room: room,\n        message: message,\n        from: loggedInUser\n      });\n    },\n    minimizeChat(room, index) {\n      this.listRoom.splice(index, 1);\n      this.chats.splice(index, 1);\n      this.messages = this.messages.filter(item => item.room !== room);\n    },\n    criarUsuario() {\n      if (this.modalEdit !== '') {\n        socket.emit('loggedin', { user_id: this.modalEdit });\n      } else { \n        this.$router.push('/login');\n      }\n      \n    }\n  },\n  mounted() {\n    this.token = this.$cookies.get(\"token\");\n    this.criarUsuario();\n    this.createRoom(this.chamarChat)\n  },\n  created: function() {\n\n    // criar chat\n    socket.on('updateUserList', response => {\n      console.log('atualiaçao de usuarios');\n\n      // CHat que estava on e preciso reabrir conexao\n      for (let i = 0; i < this.reconectar.length; i++) {\n        // Se o chat aberto nao existir aqui\n        if (response[1].indexOf(this.reconectar[i]) === 1) {\n          console.log('preciso reconectar esse chat');\n\n          let room = '';\n          if (this.modalEdit > this.chats[i]) {\n            room = this.modalEdit + this.chats[i];\n          } else {\n            room = this.chats[i] + this.modalEdit;\n          }\n\n          let index = this.chats.indexOf(this.reconectar[i]);\n          this.minimizeChat(room, index);\n          this.createRoom(this.reconectar[i]);\n        }\n      }\n\n      // Avisar se alguem ficar of e eu tenho chat aberto;\n      for (let i = 0; i < this.chats.length; i++) {\n        // Se o chat aberto nao existir aqui\n        if (response[1].indexOf(this.chats[i]) === -1) {\n          let room = '';\n          if (this.modalEdit > this.chats[i]) {\n            room = this.modalEdit + this.chats[i];\n          } else {\n            room = this.chats[i] + this.modalEdit;\n          }\n    \n          // Primeira noticaçao para o chat\n          if (this.reconectar.indexOf(this.chats[i]) === -1 ) { \n            this.reconectar.push(this.chats[i]);\n            this.messages.push({\n              room: room,\n              message: 'Usuario esta off',\n              from: 'Automatica'\n            });\n          }\n        }\n      }\n\n      this.setLoadingPage(response[0]);\n    });\n\n    // chat foi aberto em outro lugar\n    socket.on('invite', data => {\n      console.log('chat foi aberto');\n      socket.emit('joinRoom', data);\n    });\n\n    // Onde chega as mensagens de outro remetente\n    socket.on('message', async msg => {\n      console.log('CHEGOU UMA MENSAGEM ');\n      if (this.listRoom.indexOf(msg.room) === -1) {\n        this.listRoom.push(msg.room);\n        this.chats.push(msg.from);\n        let payload = { token: this.token, room :  msg.room }\n        let response = await axios.post('/api/mensagens', payload );\n        if (response.data.length > 0) {\n          this.messages = this.messages.concat(response.data);\n        }\n\n        this.messages[this.messages.length - 1] = delete this.messages[\n          this.messages.length - 1\n        ]['_id'];\n\n        if (\n          this.messages[this.messages.length - 1] !==\n          { room: msg.room, message: msg.message, from: msg.from }\n        ) {\n          this.messages.push({\n            room: msg.room,\n            message: msg.message,\n            from: msg.from\n          });\n        }\n      } else {\n        this.mensagemParticular.push('');\n\n        this.messages.push({\n          room: msg.room,\n          message: msg.message,\n          from: msg.from\n        });\n      }\n    });\n  }\n};\n</script>\n\n<style>\n#pop{ \n  position:absolute;\n  top:50%;\n  left:50%;\n  margin-left:-150px;\n  margin-top:-100px;\n  padding:10px;\n  width:300px;\n  height:200px;\n  border:1px solid #d0d0d0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./page.vue?vue&type=template&id=93e90866&\"\nimport script from \"./page.vue?vue&type=script&lang=js&\"\nexport * from \"./page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./page.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}